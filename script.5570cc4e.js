parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"mpVp":[function(require,module,exports) {
function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function e(t,e,h){return e&&i(t.prototype,e),h&&i(t,h),t}var h=document.getElementById("canvas1"),s=h.getContext("2d");h.width=900,h.height=600;var n=100,r=3,a=300,o=600,l=0,f=!1,d=0,c=50,m=1,u=[],g=[],y=[],w=[],x=[],p=[],v={x:10,y:10,width:.1,height:.1,clicked:!1};h.addEventListener("mousedown",function(){v.clicked=!0}),h.addEventListener("mouseup",function(){v.clicked=!1});var k=h.getBoundingClientRect();h.addEventListener("mousemove",function(t){v.x=t.x-k.left,v.y=t.y-k.top}),h.addEventListener("mouseleave",function(){v.y=void 0,v.y=void 0});var b={width:h.width,height:n},F=function(){function i(e,h){t(this,i),this.x=e,this.y=h,this.width=n,this.height=n}return e(i,[{key:"draw",value:function(){v.x&&v.y&&z(this,v)&&(s.strokeStyle="black",s.strokeRect(this.x,this.y,this.width,this.height))}}]),i}();function M(){for(var t=n;t<h.height;t+=n)for(var i=0;i<h.width;i+=n)u.push(new F(i,t))}function E(){for(var t=0;t<u.length;t++)u[t].draw()}M();var S=function(){function i(e,h){t(this,i),this.x=e,this.y=h,this.width=10,this.height=10,this.power=20,this.speed=5}return e(i,[{key:"update",value:function(){this.x+=this.speed}},{key:"draw",value:function(){s.fillStyle="black",s.beginPath(),s.arc(this.x,this.y,this.width,0,2*Math.PI),s.fill()}}]),i}();function O(){for(var t=0;t<x.length;t++){x[t].update(),x[t].draw();for(var i=0;i<y.length;i++)y[i]&&x[t]&&z(x[t],y[i])&&(y[i].health-=x[t].power,x.splice(t,1),t--);x[t]&&x[t].x>h.width-n&&(x.splice(t,1),t--)}}var R={};(R=new Image).onload=function(){},R.src="src/defender1.png";var T={};(T=new Image).onload=function(){},T.src="src/defender2.png";var X=function(){function i(e,h){t(this,i),this.x=e,this.y=h,this.width=n-2*r,this.height=n-2*r,this.shooting=!1,this.shootNow=!1,this.health=100,this.projectiles=[],this.timer=0,this.frameX=0,this.frameY=0,this.spriteWidth=192,this.spriteHeight=192,this.minFrame=0,this.maxFrame=16,this.chosenDefender=m}return e(i,[{key:"draw",value:function(){s.fillStyle="black",s.font="30px Orbitron",s.fillText(Math.floor(this.health),this.x+15,this.y+30),1===this.chosenDefender?s.drawImage(R,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height):2===this.chosenDefender&&s.drawImage(T,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}},{key:"update",value:function(){l%8==0&&(this.frameX<this.maxFrame?this.frameX++:this.frameX=this.minFrame,15===this.frameX&&(this.shootNow=!0)),1===this.chosenDefender?this.shooting?(this.minFrame=0,this.maxFrame=16):(this.minFrame=17,this.maxFrame=24):2===this.chosenDefender&&(this.shooting?(this.minFrame=13,this.maxFrame=28):(this.minFrame=0,this.maxFrame=12)),this.shooting&&this.shootNow&&(x.push(new S(this.x+70,this.y+50)),this.shootNow=!1)}}]),i}();function I(){for(var t=0;t<g.length;t++){g[t].draw(),g[t].update(),-1!==w.indexOf(g[t].y)?g[t].shooting=!0:g[t].shooting=!1;for(var i=0;i<y.length;i++)g[t]&&z(g[t],y[i])&&(y[i].movement=0,g[t].health-=1),g[t]&&g[t].health<=0&&(g.splice(t,1),t--,y[i].movement=y[i].speed)}}h.addEventListener("click",function(){var t=v.x-v.x%n+r,i=v.y-v.y%n+r;if(!(i<n)){for(var e=0;e<g.length;e++)if(g[e].x===t&&g[e].y===i)return;a>=100&&(g.push(new X(t,i)),a-=100)}});var H={x:10,y:10,width:70,height:85},L={x:90,y:10,width:70,height:85};function W(){var t="black",i="black";z(v,H)&&v.clicked?m=1:z(v,L)&&(m=2),1===m?(t="gold",i="black"):(t="black",i="gold"),s.lineWidth=1,s.fillStyle="rgba(0,0,0,0,2)",s.fillRect(H.x,H.y,H.width,H.height),s.strokeStyle=t,s.strokeRect(H.x,L.y,H.width,H.height),s.drawImage(R,0,0,192,192,0,5,96,96),s.fillRect(L.x,L.y,L.width,L.height),s.drawImage(T,0,0,192,192,80,5,96,96),s.strokeStyle=i,s.strokeRect(L.x,L.y,L.width,L.height)}var C=[],D={};(D=new Image).onload=function(){},D.src="src/enemy1.png",C.push(D);var Y={};(Y=new Image).onload=function(){},Y.src="src/enemy2.png",C.push(Y);var N=function(){function i(e){t(this,i),this.x=h.width,this.y=e,this.width=n-2*r,this.height=n-2*r,this.speed=.2*Math.random()+.4,this.movement=this.speed,this.health=100,this.maxHealth=this.health,this.enemyType=C[Math.round(Math.random())],this.frameX=0,this.frameY=0,this.minFrame=0,this.maxFrame=7,this.spriteWidth=192,this.spriteHeight=192}return e(i,[{key:"update",value:function(){this.x-=this.movement,l%9==0&&(this.frameX<this.maxFrame?this.frameX++:this.frameX=this.minFrame)}},{key:"draw",value:function(){s.fillStyle="black",s.font="30px Orbitron",s.fillText(Math.floor(this.health),this.x+15,this.y+30),s.drawImage(this.enemyType,this.frameX*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.x,this.y,this.width,this.height)}}]),i}();function P(){for(var t=0;t<y.length;t++)if(y[t].update(),y[t].draw(),y[t].x<0&&(f=!0),y[t].health<=0){var i=y[t].maxHealth/10;a+=i,d+=i;var e=w.indexOf(y[t].y);w.splice(e,1),y.splice(t,1),t--}if(l%o==0&&d<c){var h=Math.floor(5*Math.random()+1)*n+r;y.push(new N(h)),w.push(h),o>120&&(o-=50)}}var B=[20,30,40],j=function(){function i(){t(this,i),this.x=Math.random()*(h.width-n),this.y=(Math.floor(5*Math.random())+1)*n+25,this.width=.6*n,this.height=.6*n,this.amount=B[Math.floor(Math.random()*B.length)]}return e(i,[{key:"draw",value:function(){s.fillStyle="yellow",s.fillRect(this.x,this.y,this.width,this.height),s.fillStyle="black",s.font="20px Orbitron",s.fillText(this.amount,this.x+15,this.y+25)}}]),i}();function A(){l%500==0&&d<c&&p.push(new j);for(var t=0;t<p.length;t++)p[t].draw(),p[t]&&v.x&&v.y&&z(p[t],v)&&(a+=p[t].amount,p.splice(t,1),t--)}function V(){s.fillStyle="gold",s.font="30px Orbitron",s.fillText("Score: "+d,180,40),s.fillText("Resources: "+a,180,80),f&&(s.fillStyle="black",s.font="90px Orbitron",s.fillText("GAME OVER",135,330)),d>=c&&0===y.length&&(s.fillStyle="black",s.font="60px Orbitron",s.fillText("LEVEL COMPLETE",130,300),s.font="30px Orbitron",s.fillText("You win with "+d+" points!",134,340))}function q(){s.clearRect(0,0,h.width,h.height),s.fillStyle="blue",s.fillRect(0,0,b.width,b.height),E(),I(),A(),O(),P(),W(),V(),l++,f||requestAnimationFrame(q)}function z(t,i){if(!(t.x>i.x+i.width||t.x+t.width<i.x||t.y>i.y+i.height||t.y+t.height<i.y))return!0}q(),window.addEventListener("resize",function(){k=h.getBoundingClientRect()});
},{}]},{},["mpVp"], null)
//# sourceMappingURL=/csb-iqm68/script.5570cc4e.js.map